<?xml version="1.0" encoding="UTF-8"?>
<server description="inventory">

    <featureManager>
        <feature>microprofile-6.0</feature>
        <feature>jakartaee-10.0</feature>
        <feature>cdi-4.0</feature>
        <feature>jsonb-3.0</feature>
        <feature>mpOpenAPI-3.1</feature>
        <feature>restfulWS-3.1</feature>
        <feature>persistence-3.1</feature>
        <feature>transportSecurity-1.0</feature>
    </featureManager>

    <variable defaultValue="9080" name="default.http.port" />
    <variable defaultValue="9443" name="default.https.port" />
    <!-- tag::contextRoot[] -->
    <variable defaultValue="/inventory" name="default.context.root" />
    <!-- end::contextRoot[] -->
    <!-- tag::variables[] -->
    <variable defaultValue="localhost" name="postgres/hostname" />
    <variable defaultValue="5432" name="postgres/portnum" />
    <variable defaultValue="admin" name="postgres/username" />
    <variable defaultValue="adminpwd" name="postgres/password" />
    <!-- end::variables[] -->

    <httpEndpoint host="*" httpPort="${default.http.port}"
        httpsPort="${default.https.port}" id="defaultHttpEndpoint" />

    <!-- Automatically expand WAR files and EAR files -->
    <applicationManager autoExpand="true" />

    <keyStore id="defaultKeyStore" password="secret" />

    <webApplication contextRoot="${default.context.root}" location="inventory.war" />

    <ssl id="defaultSSLConfig" trustDefaultCerts="true" />

    <library id="postgresql-library">
        <fileset dir="${shared.resource.dir}/" includes="*.jar" />
    </library>

    <dataSource id="DefaultDataSource" jndiName="jdbc/postgresql">
        <jdbcDriver libraryRef="postgresql-library" />
        <properties.postgresql databaseName="admin"
                               serverName="localhost"
                               portNumber="5432"
                               user="admin"
                               password="adminpwd" />
    </dataSource>
</server>